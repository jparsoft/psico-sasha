<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Sasha</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="/socket.io/socket.io.js"></script>

  <style>
    .slow .toggle-group {
      transition: left 0.7s;
      -webkit-transition: left 0.7s;
    }

    .fast .toggle-group {
      transition: left 0.1s;
      -webkit-transition: left 0.1s;
    }

    .quick .toggle-group {
      transition: none;
      -webkit-transition: none;
    }
  </style>

</head>

<body>
  <div class="container-fluid">
    <div class="row">
      <div class="text-center">
        <h1><span id="dyn">Server</span> operativo!!!</h1>

        <label id="bt1" class="checkbox-inline">
                  <input id="btn1" type="checkbox"  data-toggle="toggle"  data-onstyle="success" data-offstyle="danger" data-width="100" data-height="75" data-style="slow"> Habitacion
                </label>
        <label id="bt2" class="checkbox-inline">
                  <input id="btn2" type="checkbox" data-toggle="toggle" data-on="Encendido" data-off="Apagado" data-onstyle="success" data-offstyle="danger" data-width="100" data-height="75" data-style="slow"> Living
                </label>
        <label id="bt3" class="checkbox-inline">
                  <input id="btn3" type="checkbox" data-toggle="toggle" data-on="Encendido" data-off="Apagado" data-onstyle="success" data-offstyle="danger" data-width="100" data-height="75" data-style="slow"> Ba√±o
                </label>
      </div>
      <ul id="messages"></ul>
      <div id="console-event"></div>
    </div>

  </div>

  <div id="console-event"></div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
  <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
  <script>
    var socket = io();
    $(function () {

      $('#btn1').change(function () {
        $('#console-event').html('Toggle1: ' + $(this).prop('checked'))
        socket.emit('evento', $(this).prop('checked') + ' btn1')
      })

      $('#btn2').change(function () {
        $('#console-event').html('Toggle2: ' + $(this).prop('checked'))
        socket.emit('evento', $(this).prop('checked') + ' btn2')
      })

      $('#btn3').change(function () {
        $('#console-event').html('Toggle3: ' + $(this).prop('checked'))
        socket.emit('evento', $(this).prop('checked') + ' btn3')
      })

      socket.on('btn estado', function (state) {
        $('#messages').append($('<li>').text(state))
        switch (state) {
          case 'true btn1':
            if (!$('#btn1').prop('checked')) {
              $('#btn1').bootstrapToggle('true')
            }

            break;
          case 'false btn1':
            if ($('#btn1').prop('checked')) {
              $('#btn1').bootstrapToggle('false')
            }
            break;
          case 'true btn2':
            if (!$('#btn2').prop('checked')) {
              $('#btn2').bootstrapToggle('true')
            }

            break;
          case 'false btn2':
            if ($('#btn2').prop('checked')) {
              $('#btn2').bootstrapToggle('false')
            }
            break;
          case 'true btn3':
            if (!$('#btn3').prop('checked')) {
              $('#btn3').bootstrapToggle('true')
            }

            break;
          case 'false btn3':
            if ($('#btn3').prop('checked')) {
              $('#btn3').bootstrapToggle('false')
            }
            break;

          default:
            break;
        }
      })


    })
  </script>
</body>

</html>
